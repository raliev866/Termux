






###. 0. Устанавливаем основную группу (без Calibre)

Сначала поставим всё, что точно есть в базе, чтобы заработал скрипт `мддок`:

```bash
pkg install -y pandoc ffmpeg imagemagick espeak ghostscript groff poppler openssh gh

```



Ситуация с **Calibre** в Termux классическая: этот пакет очень капризный, потому что он огромный и тянет за собой сотни зависимостей (включая графические библиотеки), которые часто «ломаются» при обновлениях Android.

Если `pkg install calibre` не находит пакет даже в TUR, значит, для твоей текущей архитектуры (скорее всего, **aarch64**) рабочей сборки в стандартных репозиториях сейчас просто нет.

Вот три способа, как всё-таки получить Calibre или его функции:

### Способ 1: Установка через Debian (proot-distro) — Самый надежный

Внутри «чистого» Termux Calibre часто нет, но он **всегда** есть в официальных репозиториях Debian. Мы можем создать внутри Termux виртуальную среду Debian и поставить Calibre туда.

1. **Установи менеджер дистрибутивов:**
```bash
pkg install proot-distro

```


2. **Установи Debian:**
```bash
proot-distro install debian

```


3. **Зайди в Debian:**
```bash
proot-distro login debian

```


4. **Внутри Debian установи Calibre:**
```bash
apt update && apt install calibre -y

```



*Теперь, когда тебе нужен `ebook-convert`, ты просто заходишь в Debian (`proot-distro login debian`) и работаешь там. Все твои папки с телефона будут видны внутри.*

---

### Способ 2: Использовать Pandoc (Легкая замена)

Если Calibre тебе нужен только для того, чтобы делать **EPUB** или **FB2** из твоих Markdown-файлов, то **Pandoc** (который ты уже поставил) справится с этим не хуже.

* **Для EPUB:**
`pandoc мой_файл.md -o книга.epub`
* **Для FB2:**
`pandoc мой_файл.md -o книга.fb2`

Это работает мгновенно и не требует 500 МБ лишнего места, как Calibre.

---

### Способ 3: Python-версия (Ebook-converter)

Есть проект на Python, который вырезает из Calibre только самое нужное — конвертер.

```bash
pip install ebook-converter

```

*(Но для этого нужно, чтобы в системе были установлены `python`, `libxml2` и `libxslt`)*.

---

### Мой совет:

Поскольку ты активно пользуешься скриптом `мддок.sh`, **остановись на Pandoc**. Он уже умеет конвертировать твои файлы в `.docx`, а если в будущем тебе понадобится `.epub`, мы просто добавим одну строчку в твой скрипт, и Pandoc сделает всё сам без участия тяжелого Calibre.

**Давай проверим, всё ли остальное поставилось?**
Введи:
`pandoc -v`

Если выдаст версию — значит, твоя основная «печатная машина» уже готова к работе! Хочешь, я помогу тебе обновить скрипт `мддок.sh`, чтобы он умел делать не только Word, но и электронные книги?