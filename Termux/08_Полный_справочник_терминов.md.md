



## ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ü–û–ù–Ø–õ –ò –ü–†–ò–ù–Ø–õ –ó–ê–î–ê–ß–£!

–Ø —Å–æ–∑–¥–∞–º –¥–ª—è —Ç–µ–±—è **–ü–û–õ–ù–´–ô –£–ß–ï–ë–ù–´–ô –°–ü–†–ê–í–û–ß–ù–ò–ö** –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–µ—Ä–º–∏–Ω—É. –í–æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä—É—é —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –¢–ï–†–ú–ò–ù (—Ä—É—Å/eng)                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï                                           ‚îÇ
‚îÇ  ‚îî‚îÄ –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ + —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üé® –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –†–ò–°–£–ù–û–ö (–≤ ASCII-–≥—Ä–∞—Ñ–∏–∫–µ)                ‚îÇ
‚îÇ  ‚îî‚îÄ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üíª –ü–†–û–ì–†–ê–ú–ú–ù–´–ô –°–ö–†–ò–ü–¢ (Termux)                           ‚îÇ
‚îÇ  ‚îî‚îÄ –†–∞–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è Termux —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üêç –ü–†–û–ì–†–ê–ú–ú–ù–´–ô –°–ö–†–ò–ü–¢ (Pydroid 3)                        ‚îÇ
‚îÇ  ‚îî‚îÄ –†–∞–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è Python –Ω–∞ Android                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–í–æ—Ç **–ü–û–õ–ù–´–ô –°–ü–†–ê–í–û–ß–ù–ò–ö**:

---

# üìö –ü–û–õ–ù–´–ô –£–ß–ï–ë–ù–´–ô –°–ü–†–ê–í–û–ß–ù–ò–ö –¢–ï–†–ú–ò–ù–û–í
*–í–µ—Ä—Å–∏—è 1.0 | –î–ª—è Termux –∏ Pydroid 3*

---

## 1Ô∏è‚É£ PARAMETER SUBSTITUTION (–ü–û–î–°–¢–ê–ù–û–í–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í)

### üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï
**Parameter Substitution** ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ Bash, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∏–∑–≤–ª–µ–∫–∞—Ç—å, –∑–∞–º–µ–Ω—è—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —É—Ç–∏–ª–∏—Ç (sed, awk).

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** –û–ø–µ—Ä–∞—Ç–æ—Ä—ã `${var#pattern}`, `${var%pattern}`, `${var/pattern/replacement}` –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ shell, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

### üé® –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –†–ò–°–£–ù–û–ö
```
–ò—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: "/home/user/docs/report.md"
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${var#*/}      ‚Üí "home/user/docs/report.md"
                (—É–¥–∞–ª—è–µ—Ç –≤—Å—ë –¥–æ –ü–ï–†–í–û–ì–û —Å–ª–µ—à–∞)
                
${var##*/}     ‚Üí "report.md"
                (—É–¥–∞–ª—è–µ—Ç –≤—Å—ë –¥–æ –ü–û–°–õ–ï–î–ù–ï–ì–û —Å–ª–µ—à–∞)
                
${var%/*}      ‚Üí "/home/user/docs"
                (—É–¥–∞–ª—è–µ—Ç –≤—Å—ë –ø–æ—Å–ª–µ –ü–û–°–õ–ï–î–ù–ï–ì–û —Å–ª–µ—à–∞)
                
${var%%/*}     ‚Üí "" (–ø—É—Å—Ç–æ)
                (—É–¥–∞–ª—è–µ—Ç –≤—Å—ë –ø–æ—Å–ª–µ –ü–ï–†–í–û–ì–û —Å–ª–µ—à–∞)
                
${var/md/docx} ‚Üí "/home/user/docs/report.docx"
                (–∑–∞–º–µ–Ω—è–µ—Ç md –Ω–∞ docx)
```

### üíª –°–ö–†–ò–ü–¢ –î–õ–Ø TERMUX

```bash
#!/data/data/com.termux/files/usr/bin/bash
# –§–∞–π–ª: parameter_demo.sh
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Parameter Substitution

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø PARAMETER SUBSTITUTION${NC}"
echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}\n"

# –ò—Å—Ö–æ–¥–Ω—ã–π –ø—É—Ç—å
FILE_PATH="/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/–ò–¥–µ–æ–ª–æ–≥–∏—è.md"
echo -e "${YELLOW}–ò—Å—Ö–æ–¥–Ω—ã–π –ø—É—Ç—å:${NC} $FILE_PATH\n"

# 1. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ò–ú–ï–ù–ò –§–ê–ô–õ–ê
filename="${FILE_PATH##*/}"
echo -e "1. ${GREEN}##*/${NC} - –∏–º—è —Ñ–∞–π–ª–∞:"
echo "   ${FILE_PATH} ‚Üí ${filename}\n"

# 2. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ü–ê–ü–ö–ò
directory="${FILE_PATH%/*}"
echo -e "2. ${GREEN}%/*${NC} - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ:"
echo "   ${FILE_PATH} ‚Üí ${directory}\n"

# 3. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –†–ê–°–®–ò–†–ï–ù–ò–Ø
extension="${filename##*.}"
echo -e "3. ${GREEN}##*.${NC} - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:"
echo "   ${filename} ‚Üí ${extension}\n"

# 4. –ò–ú–Ø –ë–ï–ó –†–ê–°–®–ò–†–ï–ù–ò–Ø
basename="${filename%.*}"
echo -e "4. ${GREEN}%.*${NC} - –∏–º—è –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:"
echo "   ${filename} ‚Üí ${basename}\n"

# 5. –£–î–ê–õ–ï–ù–ò–ï –ü–†–ï–§–ò–ö–°–ê
prefix="/storage/emulated/0/Documents/"
relative="${FILE_PATH#$prefix}"
echo -e "5. ${GREEN}#prefix${NC} - –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å:"
echo "   ${FILE_PATH} ‚Üí ${relative}\n"

# 6. –ó–ê–ú–ï–ù–ê –†–ê–°–®–ò–†–ï–ù–ò–Ø
new_path="${FILE_PATH/%md/docx}"
echo -e "6. ${GREEN}/%md/docx${NC} - –∑–∞–º–µ–Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:"
echo "   ${FILE_PATH} ‚Üí ${new_path}\n"

# 7. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ü–ï–†–í–û–ô –ü–ê–ü–ö–ò (–¥–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏)
WORK_DIR="/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2"
full_path="/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/00001. –ü–†–û–ï–ö–¢_–ö–ù–ò–ì–ê_–ò–ò .md/01_–ö–ù–ò–ì–ê - —Å–∞–º –ø—Ä–æ–¥—É–∫—Ç/–≥–ª–∞–≤–∞1.md"

rel_path="${full_path#$WORK_DIR/}"
first_folder="${rel_path%%/*}"
rest_path="${rel_path#$first_folder}"

echo -e "${YELLOW}–ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏:${NC}"
echo "   WORK_DIR: $WORK_DIR"
echo "   full_path: $full_path"
echo "   rel_path: $rel_path"
echo "   first_folder: $first_folder"
echo "   rest_path: $rest_path"

echo -e "\n${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
```

### üêç –°–ö–†–ò–ü–¢ –î–õ–Ø PYDROID 3

```python
# –§–∞–π–ª: parameter_demo.py
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–æ–≥–æ–≤ Parameter Substitution –≤ Python

import os
from pathlib import Path

# –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
class Colors:
    GREEN = '\033[92m'
    BLUE = '\033[94m'
    YELLOW = '\033[93m'
    NC = '\033[0m'

def print_colored(text, color):
    print(f"{color}{text}{Colors.NC}")

print(f"{Colors.BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê{Colors.NC}")
print(f"{Colors.GREEN}   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø PARAMETER SUBSTITUTION (Python){Colors.GREEN}")
print(f"{Colors.BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê{Colors.NC}\n")

# –ò—Å—Ö–æ–¥–Ω—ã–π –ø—É—Ç—å
file_path = "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/–ò–¥–µ–æ–ª–æ–≥–∏—è.md"
print(f"{Colors.YELLOW}–ò—Å—Ö–æ–¥–Ω—ã–π –ø—É—Ç—å:{Colors.NC} {file_path}\n")

# 1. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ò–ú–ï–ù–ò –§–ê–ô–õ–ê (–∞–Ω–∞–ª–æ–≥ ##*/)
filename = os.path.basename(file_path)
print(f"1. {Colors.GREEN}basename{Colors.NC} - –∏–º—è —Ñ–∞–π–ª–∞:")
print(f"   {file_path} ‚Üí {filename}\n")

# 2. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ü–ê–ü–ö–ò (–∞–Ω–∞–ª–æ–≥ %/*)
directory = os.path.dirname(file_path)
print(f"2. {Colors.GREEN}dirname{Colors.NC} - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ:")
print(f"   {file_path} ‚Üí {directory}\n")

# 3. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –†–ê–°–®–ò–†–ï–ù–ò–Ø (–∞–Ω–∞–ª–æ–≥ ##*.)
extension = filename.split('.')[-1] if '.' in filename else ''
print(f"3. {Colors.GREEN}split(){Colors.NC} - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:")
print(f"   {filename} ‚Üí {extension}\n")

# 4. –ò–ú–Ø –ë–ï–ó –†–ê–°–®–ò–†–ï–ù–ò–Ø (–∞–Ω–∞–ª–æ–≥ %.*)
basename = filename[:-(len(extension)+1)] if extension else filename
print(f"4. {Colors.GREEN}—Å—Ä–µ–∑ —Å—Ç—Ä–æ–∫–∏{Colors.NC} - –∏–º—è –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:")
print(f"   {filename} ‚Üí {basename}\n")

# 5. –£–î–ê–õ–ï–ù–ò–ï –ü–†–ï–§–ò–ö–°–ê (–∞–Ω–∞–ª–æ–≥ #prefix)
prefix = "/storage/emulated/0/Documents/"
relative = file_path.replace(prefix, '', 1) if file_path.startswith(prefix) else file_path
print(f"5. {Colors.GREEN}replace(){Colors.NC} - –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å:")
print(f"   {file_path} ‚Üí {relative}\n")

# 6. –ó–ê–ú–ï–ù–ê –†–ê–°–®–ò–†–ï–ù–ò–Ø (–∞–Ω–∞–ª–æ–≥ %md/docx)
new_path = file_path.replace('.md', '.docx')
print(f"6. {Colors.GREEN}replace(){Colors.NC} - –∑–∞–º–µ–Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:")
print(f"   {file_path} ‚Üí {new_path}\n")

# 7. –†–ê–ë–û–¢–ê –° PATHLIB (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±)
path = Path(file_path)
print(f"7. {Colors.GREEN}pathlib{Colors.NC} - –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:")
print(f"   parent: {path.parent}")
print(f"   stem: {path.stem}")
print(f"   suffix: {path.suffix}")
print(f"   with_suffix: {path.with_suffix('.docx')}\n")

# 8. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ü–ï–†–í–û–ô –ü–ê–ü–ö–ò (–¥–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏)
WORK_DIR = "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2"
full_path = "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/00001. –ü–†–û–ï–ö–¢_–ö–ù–ò–ì–ê_–ò–ò .md/01_–ö–ù–ò–ì–ê - —Å–∞–º –ø—Ä–æ–¥—É–∫—Ç/–≥–ª–∞–≤–∞1.md"

rel_path = full_path.replace(WORK_DIR, '').lstrip('/')
parts = rel_path.split('/')
first_folder = parts[0] if parts else ''
rest_path = '/' + '/'.join(parts[1:]) if len(parts) > 1 else ''

print(f"{Colors.YELLOW}–ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏:{Colors.NC}")
print(f"   WORK_DIR: {WORK_DIR}")
print(f"   full_path: {full_path}")
print(f"   rel_path: {rel_path}")
print(f"   first_folder: {first_folder}")
print(f"   rest_path: {rest_path}")

print(f"\n{Colors.BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê{Colors.NC}")
```

---

## 2Ô∏è‚É£ DIRECTORY TREE MIRRORING (–ó–ï–†–ö–ê–õ–ò–†–û–í–ê–ù–ò–ï –î–ï–†–ï–í–ê –ö–ê–¢–ê–õ–û–ì–û–í)

### üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï
**Directory Tree Mirroring** ‚Äî —ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∏—Å—Ö–æ–¥–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –ø–∞–ø–æ–∫ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –Ω–æ —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Å—É—Ñ—Ñ–∏–∫—Å–∞) —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ—Ä–Ω–µ–≤—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –æ–±—Ö–æ–¥–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø—É—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—É: `–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ` ‚Üí `–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ - —Å—É—Ñ—Ñ–∏–∫—Å/–æ—Å—Ç–∞—Ç–æ–∫/–ø—É—Ç–∏`.

### üé® –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –†–ò–°–£–ù–û–ö
```
–ò–°–•–û–î–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê                 –ó–ï–†–ö–ê–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê (—Å—É—Ñ—Ñ–∏–∫—Å " - docx")
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
02_md_docx_–º–¥–¥–æ–∫/                  02_md_docx_–º–¥–¥–æ–∫/
‚îÇ                                   ‚îÇ
‚îú‚îÄ‚îÄ —Ñ–∞–π–ª.md                         ‚îú‚îÄ‚îÄ —Ñ–∞–π–ª.docx
‚îÇ                                   ‚îÇ
‚îú‚îÄ‚îÄ –ü–∞–ø–∫–∞–ê/                         ‚îú‚îÄ‚îÄ –ü–∞–ø–∫–∞–ê - docx/
‚îÇ   ‚îú‚îÄ‚îÄ —Ñ–∞–π–ª1.md                    ‚îÇ   ‚îú‚îÄ‚îÄ —Ñ–∞–π–ª1.docx
‚îÇ   ‚îî‚îÄ‚îÄ –ü–æ–¥–ø–∞–ø–∫–∞/                    ‚îÇ   ‚îî‚îÄ‚îÄ –ü–æ–¥–ø–∞–ø–∫–∞/
‚îÇ       ‚îî‚îÄ‚îÄ —Ñ–∞–π–ª2.md                  ‚îÇ       ‚îî‚îÄ‚îÄ —Ñ–∞–π–ª2.docx
‚îÇ                                   ‚îÇ
‚îî‚îÄ‚îÄ –ü–∞–ø–∫–∞–ë/                         ‚îî‚îÄ‚îÄ –ü–∞–ø–∫–∞–ë - docx/
    ‚îî‚îÄ‚îÄ —Ñ–∞–π–ª3.md                         ‚îî‚îÄ‚îÄ —Ñ–∞–π–ª3.docx

–ü–†–ê–í–ò–õ–û:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –†–Ø–î–û–ú                  ‚îÇ
‚îÇ –§–∞–π–ª—ã –≤ –ø–∞–ø–∫–∞—Ö ‚Üí –ø–∞–ø–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å,            ‚îÇ
‚îÇ                  –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üíª –°–ö–†–ò–ü–¢ –î–õ–Ø TERMUX

```bash
#!/data/data/com.termux/files/usr/bin/bash
# –§–∞–π–ª: mirror_demo.sh
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Directory Tree Mirroring

# –¶–≤–µ—Ç–∞
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø DIRECTORY TREE MIRRORING${NC}"
echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}\n"

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
WORK_DIR="/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2"
INPUT_EXT="md"
OUTPUT_EXT="fb2"
FOLDER_SUFFIX=" - ${OUTPUT_EXT}"

echo -e "${YELLOW}–†–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞:${NC} $WORK_DIR"
echo -e "${YELLOW}–°—É—Ñ—Ñ–∏–∫—Å:${NC} $FOLDER_SUFFIX\n"

# –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
create_test_structure() {
    mkdir -p "$WORK_DIR"
    mkdir -p "$WORK_DIR/–ü–∞–ø–∫–∞–ê/–ü–æ–¥–ø–∞–ø–∫–∞"
    mkdir -p "$WORK_DIR/–ü–∞–ø–∫–∞–ë"
    
    echo "# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª" > "$WORK_DIR/–∫–æ—Ä–Ω–µ–≤–æ–π.md"
    echo "# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª" > "$WORK_DIR/–ü–∞–ø–∫–∞–ê/—Ñ–∞–π–ª1.md"
    echo "# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª" > "$WORK_DIR/–ü–∞–ø–∫–∞–ê/–ü–æ–¥–ø–∞–ø–∫–∞/—Ñ–∞–π–ª2.md"
    echo "# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª" > "$WORK_DIR/–ü–∞–ø–∫–∞–ë/—Ñ–∞–π–ª3.md"
    
    echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞${NC}"
}

# –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
clean_test_structure() {
    rm -rf "$WORK_DIR/–ü–∞–ø–∫–∞–ê" "$WORK_DIR/–ü–∞–ø–∫–∞–ë" "$WORK_DIR/–∫–æ—Ä–Ω–µ–≤–æ–π.md"
    rm -rf "$WORK_DIR"/*"$FOLDER_SUFFIX"* 2>/dev/null
    echo -e "${YELLOW}üßπ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—á–∏—â–µ–Ω–∞${NC}\n"
}

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è
mirror_files() {
    local files_found=0
    local files_mirrored=0
    
    echo -e "${BLUE}üîç –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ .$INPUT_EXT...${NC}\n"
    
    find "$WORK_DIR" -type f -name "*.$INPUT_EXT" 2>/dev/null | while read -r full_path; do
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ (idempotency)
        if [[ "$full_path" == *"$FOLDER_SUFFIX/"* ]]; then
            continue
        fi
        
        files_found=$((files_found + 1))
        
        filename=$(basename "$full_path" ".$INPUT_EXT")
        file_dir=$(dirname "$full_path")
        
        echo -e "${YELLOW}[$files_found]${NC} $filename.$INPUT_EXT"
        
        # ===== –ó–ï–†–ö–ê–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê =====
        if [ "$file_dir" = "$WORK_DIR" ]; then
            # –°–ª—É—á–∞–π 1: —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ
            output_dir="$file_dir"
            echo "   ‚îî‚îÄ üìç –ö–æ—Ä–Ω–µ–≤–æ–π ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—é —Ä—è–¥–æ–º"
        else
            # –°–ª—É—á–∞–π 2: —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ
            rel_path="${file_dir#$WORK_DIR/}"
            top_folder="${rel_path%%/*}"
            sub_path="${rel_path#$top_folder}"
            
            # –°–æ–∑–¥–∞—ë–º –∑–µ—Ä–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É
            target_folder="$WORK_DIR/${top_folder}${FOLDER_SUFFIX}${sub_path}"
            mkdir -p "$target_folder"
            output_dir="$target_folder"
            
            echo "   ‚îî‚îÄ üîÑ –ó–µ—Ä–∫–∞–ª–æ: ${top_folder}${FOLDER_SUFFIX}${sub_path}/"
        fi
        
        output_file="$output_dir/$filename.$OUTPUT_EXT"
        
        # –ò–º–∏—Ç–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞—ë–º –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª)
        touch "$output_file"
        echo "      ‚úÖ –°–æ–∑–¥–∞–Ω: $filename.$OUTPUT_EXT"
        
        files_mirrored=$((files_mirrored + 1))
    done
    
    echo -e "\n${GREEN}‚úÖ –ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ${NC}"
    echo "   –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: $files_found"
    echo "   –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: $files_mirrored"
}

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
show_structure() {
    echo -e "\n${BLUE}üìÅ –¢–ï–ö–£–©–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:${NC}"
    ls -R "$WORK_DIR" | head -20
}

# –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
clean_test_structure
create_test_structure
show_structure
echo ""
mirror_files
show_structure

echo -e "\n${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞${NC}"
```

### üêç –°–ö–†–ò–ü–¢ –î–õ–Ø PYDROID 3

```python
# –§–∞–π–ª: mirror_demo.py
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Directory Tree Mirroring –Ω–∞ Python

import os
import shutil
from pathlib import Path

class Colors:
    GREEN = '\033[92m'
    BLUE = '\033[94m'
    YELLOW = '\033[93m'
    RED = '\033[91m'
    NC = '\033[0m'

def print_color(text, color):
    print(f"{color}{text}{Colors.NC}")

class DirectoryMirror:
    def __init__(self, work_dir, input_ext, output_ext):
        self.work_dir = Path(work_dir)
        self.input_ext = input_ext
        self.output_ext = output_ext
        self.suffix = f" - {output_ext}"
        self.files_found = 0
        self.files_mirrored = 0
    
    def create_test_structure(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫"""
        os.makedirs(self.work_dir, exist_ok=True)
        os.makedirs(self.work_dir / "–ü–∞–ø–∫–∞–ê" / "–ü–æ–¥–ø–∞–ø–∫–∞", exist_ok=True)
        os.makedirs(self.work_dir / "–ü–∞–ø–∫–∞–ë", exist_ok=True)
        
        # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
        (self.work_dir / "–∫–æ—Ä–Ω–µ–≤–æ–π.md").write_text("# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª")
        (self.work_dir / "–ü–∞–ø–∫–∞–ê" / "—Ñ–∞–π–ª1.md").write_text("# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª")
        (self.work_dir / "–ü–∞–ø–∫–∞–ê" / "–ü–æ–¥–ø–∞–ø–∫–∞" / "—Ñ–∞–π–ª2.md").write_text("# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª")
        (self.work_dir / "–ü–∞–ø–∫–∞–ë" / "—Ñ–∞–π–ª3.md").write_text("# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª")
        
        print_color("‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞", Colors.GREEN)
    
    def clean_test_structure(self):
        """–û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã"""
        for item in self.work_dir.iterdir():
            if item.is_dir():
                if item.name in ["–ü–∞–ø–∫–∞–ê", "–ü–∞–ø–∫–∞–ë"] or self.suffix in item.name:
                    shutil.rmtree(item)
            else:
                if item.name != "–∫–æ—Ä–Ω–µ–≤–æ–π.md":
                    item.unlink()
        print_color("üßπ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—á–∏—â–µ–Ω–∞", Colors.YELLOW)
    
    def get_target_path(self, file_path):
        """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è —Ñ–∞–π–ª–∞"""
        file_path = Path(file_path)
        file_dir = file_path.parent
        
        if file_dir == self.work_dir:
            # –°–ª—É—á–∞–π 1: —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ
            return file_dir
        
        # –°–ª—É—á–∞–π 2: —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ
        rel_path = str(file_dir.relative_to(self.work_dir))
        parts = rel_path.split(os.sep)
        top_folder = parts[0]
        sub_path = os.sep.join(parts[1:]) if len(parts) > 1 else ""
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –∑–µ—Ä–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å
        target = self.work_dir / f"{top_folder}{self.suffix}" / sub_path
        return target
    
    def mirror_files(self):
        """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è"""
        print_color(f"\nüîç –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ .{self.input_ext}...\n", Colors.BLUE)
        
        for full_path in self.work_dir.rglob(f"*.{self.input_ext}"):
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ (idempotency)
            if self.suffix in str(full_path):
                continue
            
            self.files_found += 1
            filename = full_path.stem
            
            print_color(f"[{self.files_found}] {filename}.{self.input_ext}", Colors.YELLOW)
            
            # –ü–æ–ª—É—á–∞–µ–º —Ü–µ–ª–µ–≤–æ–π –ø—É—Ç—å
            target_dir = self.get_target_path(full_path)
            os.makedirs(target_dir, exist_ok=True)
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–æ—Ä–Ω–µ–≤–æ–π —ç—Ç–æ —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ—Ç
            if full_path.parent == self.work_dir:
                print(f"   ‚îî‚îÄ üìç –ö–æ—Ä–Ω–µ–≤–æ–π ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—é —Ä—è–¥–æ–º")
            else:
                rel_to_work = str(full_path.parent.relative_to(self.work_dir))
                print(f"   ‚îî‚îÄ üîÑ –ó–µ—Ä–∫–∞–ª–æ: {rel_to_work} ‚Üí {target_dir}")
            
            # –°–æ–∑–¥–∞—ë–º –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª (–∏–º–∏—Ç–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
            output_file = target_dir / f"{filename}.{self.output_ext}"
            output_file.touch()
            
            print(f"      ‚úÖ –°–æ–∑–¥–∞–Ω: {output_file.name}")
            self.files_mirrored += 1
        
        print_color(f"\n‚úÖ –ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ", Colors.GREEN)
        print(f"   –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {self.files_found}")
        print(f"   –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {self.files_mirrored}")
    
    def show_structure(self, lines=20):
        """–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫"""
        print_color(f"\nüìÅ –¢–ï–ö–£–©–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:", Colors.BLUE)
        count = 0
        for root, dirs, files in os.walk(self.work_dir):
            level = root.replace(str(self.work_dir), '').count(os.sep)
            indent = ' ' * 4 * level
            print(f"{indent}{os.path.basename(root)}/")
            subindent = ' ' * 4 * (level + 1)
            for file in files[:5]:  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 5 —Ñ–∞–π–ª–æ–≤
                print(f"{subindent}{file}")
                count += 1
                if count > lines:
                    print(f"{subindent}...")
                    return

def main():
    print_color("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê", Colors.BLUE)
    print_color("   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø DIRECTORY TREE MIRRORING", Colors.GREEN)
    print_color("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n", Colors.BLUE)
    
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    WORK_DIR = "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2"
    
    mirror = DirectoryMirror(WORK_DIR, "md", "fb2")
    
    # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
    mirror.clean_test_structure()
    mirror.create_test_structure()
    mirror.show_structure()
    mirror.mirror_files()
    mirror.show_structure()
    
    print_color("\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê", Colors.BLUE)
    print_color("‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞", Colors.GREEN)

if __name__ == "__main__":
    main()
```

---

## 3Ô∏è‚É£ IDEMPOTENCY (–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–¨)

### üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï
**Idempotency** ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –µ—ë –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–∞—ë—Ç —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ. –°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ —Ä–∞–∑ ‚Äî –æ–Ω –Ω–µ —Å–æ–∑–¥–∞—Å—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–æ–∫.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º, –ø—Ä–æ–ø—É—Å–∫ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤ `-f`, `-d` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫.

### üé® –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –†–ò–°–£–ù–û–ö
```
–ë–ï–ó –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–ò (–ü–õ–û–•–û):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ó–∞–ø—É—Å–∫ 1: mkdir –ø–∞–ø–∫–∞     ‚Üí –ø–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞           ‚îÇ
‚îÇ –ó–∞–ø—É—Å–∫ 2: mkdir –ø–∞–ø–∫–∞     ‚Üí –û–®–ò–ë–ö–ê: —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç  ‚îÇ
‚îÇ –ó–∞–ø—É—Å–∫ 3: cp file file2   ‚Üí –≤—Ç–æ—Ä–æ–π –¥—É–±–ª–∏–∫–∞—Ç         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–° –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–¨–Æ (–•–û–†–û–®–û):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ó–∞–ø—É—Å–∫ 1: mkdir -p –ø–∞–ø–∫–∞  ‚Üí –ø–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞           ‚îÇ
‚îÇ –ó–∞–ø—É—Å–∫ 2: mkdir -p –ø–∞–ø–∫–∞  ‚Üí —Ç–∏—Ö–æ, –æ—à–∏–±–∫–∏ –Ω–µ—Ç        ‚îÇ
‚îÇ –ó–∞–ø—É—Å–∫ 3: [ -f file2 ] || cp file file2 ‚Üí –æ–¥–∏–Ω —Ñ–∞–π–ª ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–†–û–í–ï–†–ö–ò:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [ -d "–ø–∞–ø–∫–∞" ]    # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–∞–ø–∫–∏    ‚îÇ
‚îÇ [ -f "—Ñ–∞–π–ª" ]     # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞    ‚îÇ
‚îÇ [[ "$path" == *"suffix"* ]]  # –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üíª –°–ö–†–ò–ü–¢ –î–õ–Ø TERMUX

```bash
#!/data/data/com.termux/files/usr/bin/bash
# –§–∞–π–ª: idempotency_demo.sh
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–ò${NC}"
echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}\n"

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–ø–∫–∞
DEMO_DIR="/storage/emulated/0/Documents/idempotency_demo"
mkdir -p "$DEMO_DIR"
cd "$DEMO_DIR"

echo -e "${YELLOW}–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–ø–∫–∞:${NC} $DEMO_DIR\n"

# ===== –ü–†–ò–ú–ï–† 1: –°–û–ó–î–ê–ù–ò–ï –ü–ê–ü–û–ö =====
echo -e "${BLUE}–ü–†–ò–ú–ï–† 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫${NC}"

# –ù–ï–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û (–ø–ª–æ—Ö–æ)
echo -e "\n${RED}‚ùå –ù–ï–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û:${NC}"
echo "   mkdir test_folder"
mkdir test_folder 2>/dev/null && echo "   ‚úÖ –ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞"
echo "   mkdir test_folder (—Å–Ω–æ–≤–∞)"
mkdir test_folder 2>/dev/null || echo "   ‚ùå –û–®–ò–ë–ö–ê: –ø–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

# –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û (—Ö–æ—Ä–æ—à–æ)
echo -e "\n${GREEN}‚úÖ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û:${NC}"
echo "   mkdir -p test_folder2"
mkdir -p test_folder2 && echo "   ‚úÖ –ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
echo "   mkdir -p test_folder2 (—Å–Ω–æ–≤–∞)"
mkdir -p test_folder2 && echo "   ‚úÖ –í—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫ - –æ—à–∏–±–∫–∏ –Ω–µ—Ç"

# ===== –ü–†–ò–ú–ï–† 2: –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –§–ê–ô–õ–û–í =====
echo -e "\n${BLUE}–ü–†–ò–ú–ï–† 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤${NC}"

echo "–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç" > source.txt

# –ù–ï–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û
echo -e "\n${RED}‚ùå –ù–ï–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û:${NC}"
cp source.txt dest1.txt && echo "   ‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
cp source.txt dest1.txt && echo "   ‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω (—Å–Ω–æ–≤–∞ - —Å–æ–∑–¥–∞–Ω –¥—É–±–ª–∏–∫–∞—Ç?)"
echo "   üö® –°–æ–¥–µ—Ä–∂–∏–º–æ–µ dest1.txt –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ, –Ω–æ —Ñ–∞–π–ª –æ–¥–∏–Ω"

# –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π)
echo -e "\n${GREEN}‚úÖ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û:${NC}"
if [ ! -f "dest2.txt" ]; then
    cp source.txt dest2.txt
    echo "   ‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)"
else
    echo "   ‚è≠Ô∏è –§–∞–π–ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
fi

if [ ! -f "dest2.txt" ]; then
    cp source.txt dest2.txt
else
    echo "   ‚è≠Ô∏è –í—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫ - —Ñ–∞–π–ª —É–∂–µ –µ—Å—Ç—å, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
fi

# ===== –ü–†–ò–ú–ï–† 3: –ó–ê–©–ò–¢–ê –û–¢ –ü–û–í–¢–û–†–ù–û–ô –û–ë–†–ê–ë–û–¢–ö–ò =====
echo -e "\n${BLUE}–ü–†–ò–ú–ï–† 3: –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏${NC}"

# –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
mkdir -p "source/–ü–∞–ø–∫–∞"
mkdir -p "processed/–ü–∞–ø–∫–∞ - docx"
echo "—Ñ–∞–π–ª1" > "source/—Ñ–∞–π–ª1.md"
echo "—Ñ–∞–π–ª2" > "source/–ü–∞–ø–∫–∞/—Ñ–∞–π–ª2.md"
touch "processed/–ü–∞–ø–∫–∞ - docx/—Ñ–∞–π–ª2.docx"

process_files() {
    local files_found=0
    local files_processed=0
    
    find "source" -type f -name "*.md" | while read -r file; do
        
        # –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê
        if [[ "$file" == *" - docx/"* ]]; then
            echo "   ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π: $file"
            continue
        fi
        
        files_found=$((files_found + 1))
        filename=$(basename "$file" .md)
        filedir=$(dirname "$file")
        
        echo "   üìÑ –ù–∞–π–¥–µ–Ω: $filename.md"
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–µ–ª–µ–≤—É—é –ø–∞–ø–∫—É
        if [ "$filedir" = "source" ]; then
            target="processed"
        else
            rel_path="${filedir#source/}"
            top_folder="${rel_path%%/*}"
            target="processed/${top_folder} - docx"
        fi
        
        mkdir -p "$target"
        output="$target/$filename.docx"
        
        # –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê
        if [ ! -f "$output" ]; then
            touch "$output"
            echo "      ‚úÖ –°–æ–∑–¥–∞–Ω: $filename.docx"
            files_processed=$((files_processed + 1))
        else
            echo "      ‚è≠Ô∏è –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: $filename.docx"
        fi
    done
    
    echo -e "\n   üìä –ù–∞–π–¥–µ–Ω–æ: $files_found, –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: $files_processed"
}

echo -e "\n${YELLOW}–ó–∞–ø—É—Å–∫ 1:${NC}"
process_files

echo -e "\n${YELLOW}–ó–∞–ø—É—Å–∫ 2 (—Ç–æ—Ç –∂–µ —Å–∞–º—ã–π):${NC}"
process_files

# ===== –ü–†–ò–ú–ï–† 4: –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò =====
echo -e "\n${BLUE}–ü–†–ò–ú–ï–† 4: –ü–æ–ª–µ–∑–Ω—ã–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏${NC}"

cat > "$DEMO_DIR/idempotent_functions.sh" << 'EOF'
#!/bin/bash

# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏
safe_mkdir() {
    mkdir -p "$1" && echo "‚úÖ –ü–∞–ø–∫–∞ $1 –≥–æ—Ç–æ–≤–∞"
}

# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
safe_copy() {
    if [ ! -f "$2" ]; then
        cp "$1" "$2" && echo "‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ $2"
    else
        echo "‚è≠Ô∏è –§–∞–π–ª $2 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
    fi
}

# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å)
safe_append() {
    if ! grep -q "$2" "$1" 2>/dev/null; then
        echo "$2" >> "$1"
        echo "‚úÖ –°—Ç—Ä–æ–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞"
    else
        echo "‚è≠Ô∏è –°—Ç—Ä–æ–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ"
    fi
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø—É—Ç–∏
is_processed() {
    [[ "$1" == *" - docx/"* ]] || [[ "$1" == *" - fb2/"* ]]
}

# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
safe_mirror() {
    local source_file="$1"
    local target_dir="$2"
    
    if is_processed "$source_file"; then
        echo "‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ñ–∞–π–ª"
        return 0
    fi
    
    if [ ! -d "$target_dir" ]; then
        mkdir -p "$target_dir"
        echo "‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞: $target_dir"
    fi
    
    if [ ! -f "$target_dir/$(basename "$source_file")" ]; then
        cp "$source_file" "$target_dir/"
        echo "‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
    fi
}
EOF

chmod +x idempotent_functions.sh
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏${NC}"

# ===== –ü–†–ò–ú–ï–† 5: –ü–†–ê–ö–¢–ò–ö–ê –° TERMUX =====
echo -e "\n${BLUE}–ü–†–ò–ú–ï–† 5: –ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è Termux (Pandoc)${NC}"

cat > "$DEMO_DIR/idempotent_pandoc.sh" << 'EOF'
#!/data/data/com.termux/files/usr/bin/bash
# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å Pandoc

WORK_DIR="/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2"
INPUT_EXT="md"
OUTPUT_EXT="fb2"
FOLDER_SUFFIX=" - ${OUTPUT_EXT}"

# –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
convert_if_needed() {
    local md_file="$1"
    local fb2_file="$2"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ
    if [[ "$md_file" == *"$FOLDER_SUFFIX/"* ]]; then
        echo "‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º: —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏"
        return 0
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
    if [ ! -f "$md_file" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –Ω—É–∂–Ω–æ –ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å (—Ñ–∞–π–ª –Ω–æ–≤–µ–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
    if [ -f "$fb2_file" ]; then
        if [ "$md_file" -ot "$fb2_file" ]; then
            echo "‚è≠Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–µ–∂–µ–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
            return 0
        fi
    fi
    
    # –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    mkdir -p "$(dirname "$fb2_file")"
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º
    echo "‚öôÔ∏è –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é: $(basename "$md_file")"
    pandoc "$md_file" -o "$fb2_file" 2>/dev/null
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ –ì–æ—Ç–æ–≤–æ: $(basename "$fb2_file")"
        return 0
    else
        echo "‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏"
        return 1
    fi
}

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
find "$WORK_DIR" -name "*.md" | while read -r file; do
    filename=$(basename "$file" .md)
    filedir=$(dirname "$file")
    
    if [ "$filedir" = "$WORK_DIR" ]; then
        # –ö–æ—Ä–Ω–µ–≤–æ–π —Ñ–∞–π–ª
        output="$WORK_DIR/$filename.$OUTPUT_EXT"
    else
        # –§–∞–π–ª –≤ –ø–∞–ø–∫–µ
        rel_path="${filedir#$WORK_DIR/}"
        top_folder="${rel_path%%/*}"
        sub_path="${rel_path#$top_folder}"
        output="$WORK_DIR/${top_folder}${FOLDER_SUFFIX}${sub_path}/$filename.$OUTPUT_EXT"
    fi
    
    convert_if_needed "$file" "$output"
done
EOF

chmod +x idempotent_pandoc.sh
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Pandoc${NC}"

echo -e "\n${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞${NC}"
echo -e "${YELLOW}üí° –§—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤:${NC}"
echo "   $DEMO_DIR/idempotent_functions.sh"
echo "   $DEMO_DIR/idempotent_pandoc.sh"
```

### üêç –°–ö–†–ò–ü–¢ –î–õ–Ø PYDROID 3

```python
# –§–∞–π–ª: idempotency_demo.py
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –≤ Python

import os
import shutil
import hashlib
from pathlib import Path
from datetime import datetime

class Colors:
    GREEN = '\033[92m'
    BLUE = '\033[94m'
    YELLOW = '\033[93m'
    RED = '\033[91m'
    NC = '\033[0m'

def print_color(text, color):
    print(f"{color}{text}{Colors.NC}")

class IdempotentOperations:
    """–ö–ª–∞—Å—Å —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏"""
    
    def __init__(self, base_dir):
        self.base_dir = Path(base_dir)
        self.base_dir.mkdir(parents=True, exist_ok=True)
        self.processed_files = set()
        self.load_state()
    
    def load_state(self):
        """–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏)"""
        state_file = self.base_dir / ".processed.log"
        if state_file.exists():
            with open(state_file, 'r') as f:
                self.processed_files = set(line.strip() for line in f)
    
    def save_state(self, file_path):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
        state_file = self.base_dir / ".processed.log"
        with open(state_file, 'a') as f:
            f.write(f"{file_path}\n")
        self.processed_files.add(file_path)
    
    def safe_mkdir(self, path):
        """–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏"""
        path = Path(path)
        if not path.exists():
            path.mkdir(parents=True)
            print_color(f"   ‚úÖ –ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞: {path}", Colors.GREEN)
        else:
            print_color(f"   ‚è≠Ô∏è –ü–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {path}", Colors.YELLOW)
        return path
    
    def safe_copy(self, src, dst, check_hash=True):
        """–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ"""
        src = Path(src)
        dst = Path(dst)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        if not src.exists():
            print_color(f"   ‚ùå –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {src}", Colors.RED)
            return False
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ü–µ–ª–µ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
        if dst.exists():
            if check_hash:
                # –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ö–µ—à–∏
                if self.file_hash(src) == self.file_hash(dst):
                    print_color(f"   ‚è≠Ô∏è –§–∞–π–ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω: {dst.name}", Colors.YELLOW)
                    return True
                else:
                    print_color(f"   ‚ö†Ô∏è –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è. –ü–µ—Ä–µ–∑–∞–ø–∏—Å—å?", Colors.YELLOW)
                    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Å–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥
                    return False
            else:
                print_color(f"   ‚è≠Ô∏è –§–∞–π–ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {dst.name}", Colors.YELLOW)
                return True
        
        # –ö–æ–ø–∏—Ä—É–µ–º
        shutil.copy2(src, dst)
        print_color(f"   ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {src.name} ‚Üí {dst.name}", Colors.GREEN)
        return True
    
    def file_hash(self, file_path):
        """–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö–µ—à–∞ —Ñ–∞–π–ª–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è"""
        hasher = hashlib.md5()
        with open(file_path, 'rb') as f:
            for chunk in iter(lambda: f.read(4096), b''):
                hasher.update(chunk)
        return hasher.hexdigest()
    
    def safe_write(self, file_path, content, mode='append'):
        """–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª"""
        file_path = Path(file_path)
        
        if mode == 'append':
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è —Å—Ç—Ä–æ–∫–∞
            if file_path.exists():
                with open(file_path, 'r') as f:
                    if content in f.read():
                        print_color(f"   ‚è≠Ô∏è –°—Ç—Ä–æ–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ", Colors.YELLOW)
                        return True
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É
            with open(file_path, 'a') as f:
                f.write(content + '\n')
            print_color(f"   ‚úÖ –°—Ç—Ä–æ–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞", Colors.GREEN)
        
        elif mode == 'overwrite':
            # –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
            if file_path.exists():
                with open(file_path, 'r') as f:
                    if f.read() == content:
                        print_color(f"   ‚è≠Ô∏è –§–∞–π–ª —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–∫–æ–π –∂–µ –∫–æ–Ω—Ç–µ–Ω—Ç", Colors.YELLOW)
                        return True
            
            with open(file_path, 'w') as f:
                f.write(content)
            print_color(f"   ‚úÖ –§–∞–π–ª –∑–∞–ø–∏—Å–∞–Ω", Colors.GREEN)
    
    def safe_process_file(self, file_path, processor_func):
        """–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞"""
        file_path = Path(file_path)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –ª–∏ —É–∂–µ
        if str(file_path) in self.processed_files:
            print_color(f"   ‚è≠Ô∏è –§–∞–π–ª —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏: {file_path.name}", Colors.YELLOW)
            return True
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª
        if not file_path.exists():
            print_color(f"   ‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {file_path}", Colors.RED)
            return False
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞
        try:
            result = processor_func(file_path)
            if result:
                self.save_state(str(file_path))
                print_color(f"   ‚úÖ –§–∞–π–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω: {file_path.name}", Colors.GREEN)
            return result
        except Exception as e:
            print_color(f"   ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: {e}", Colors.RED)
            return False
    
    def is_processed_path(self, path, suffix_list=None):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—É—Ç—å —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º"""
        if suffix_list is None:
            suffix_list = [" - docx", " - fb2", " - html"]
        
        path_str = str(path)
        for suffix in suffix_list:
            if suffix in path_str:
                return True
        return False

def demo_idempotency():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏"""
    
    print_color("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê", Colors.BLUE)
    print_color("   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–ò (Python)", Colors.GREEN)
    print_color("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n", Colors.BLUE)
    
    # –°–æ–∑–¥–∞—ë–º —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É
    demo_dir = "/storage/emulated/0/Documents/idempotency_demo"
    ops = IdempotentOperations(demo_dir)
    
    # ===== –ü–†–ò–ú–ï–† 1: –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–ï –°–û–ó–î–ê–ù–ò–ï –ü–ê–ü–û–ö =====
    print_color("\nüìÅ –ü–†–ò–ú–ï–† 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫", Colors.BLUE)
    
    print_color("\n‚ùå –ù–ï–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û (–ø–ª–æ—Ö–æ):", Colors.RED)
    try:
        os.mkdir(f"{demo_dir}/test_folder")
        print("   ‚úÖ –ü–∞–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞")
        os.mkdir(f"{demo_dir}/test_folder")  # –í—Ç–æ—Ä–æ–π —Ä–∞–∑ - –æ—à–∏–±–∫–∞!
    except FileExistsError:
        print("   ‚ùå –û–®–ò–ë–ö–ê: –ø–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
    
    print_color("\n‚úÖ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û (—Ö–æ—Ä–æ—à–æ):", Colors.GREEN)
    ops.safe_mkdir(f"{demo_dir}/test_folder2")
    ops.safe_mkdir(f"{demo_dir}/test_folder2")  # –í—Ç–æ—Ä–æ–π —Ä–∞–∑ - –±–µ–∑ –æ—à–∏–±–∫–∏
    
    # ===== –ü–†–ò–ú–ï–† 2: –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–ï –ö–û–ü–ò–†–û–í–ê–ù–ò–ï =====
    print_color("\nüìÅ –ü–†–ò–ú–ï–† 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤", Colors.BLUE)
    
    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
    source = Path(demo_dir) / "source.txt"
    with open(source, 'w') as f:
        f.write("–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç")
    
    print_color("\n‚ùå –ù–ï–ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û:", Colors.RED)
    dest1 = Path(demo_dir) / "dest1.txt"
    shutil.copy(source, dest1)
    print("   ‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω (—Ä–∞–∑)")
    shutil.copy(source, dest1)  # –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç
    print("   ‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω (–¥–≤–∞ - –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω)")
    
    print_color("\n‚úÖ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û:", Colors.GREEN)
    dest2 = Path(demo_dir) / "dest2.txt"
    ops.safe_copy(source, dest2)
    ops.safe_copy(source, dest2)  # –í—Ç–æ—Ä–æ–π —Ä–∞–∑ - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç
    
    # ===== –ü–†–ò–ú–ï–† 3: –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–ê–Ø –ó–ê–ü–ò–°–¨ =====
    print_color("\nüìÅ –ü–†–ò–ú–ï–† 3: –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª", Colors.BLUE)
    
    log_file = Path(demo_dir) / "log.txt"
    
    print_color("\n‚úÖ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–ï –î–û–ë–ê–í–õ–ï–ù–ò–ï:", Colors.GREEN)
    ops.safe_write(log_file, "–ó–∞–ø–∏—Å—å 1", mode='append')
    ops.safe_write(log_file, "–ó–∞–ø–∏—Å—å 1", mode='append')  # –î—É–±–ª—å –Ω–µ –¥–æ–±–∞–≤–∏—Ç—Å—è
    
    # ===== –ü–†–ò–ú–ï–† 4: –ó–ê–©–ò–¢–ê –û–¢ –ü–û–í–¢–û–†–ù–û–ô –û–ë–†–ê–ë–û–¢–ö–ò =====
    print_color("\nüìÅ –ü–†–ò–ú–ï–† 4: –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏", Colors.BLUE)
    
    def process_file(file_path):
        """–§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞"""
        # –ò–º–∏—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        time.sleep(0.1)
        return True
    
    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
    test_file = Path(demo_dir) / "test.md"
    test_file.write_text("# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª")
    
    print_color("\n‚úÖ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê:", Colors.GREEN)
    ops.safe_process_file(test_file, process_file)
    ops.safe_process_file(test_file, process_file)  # –í—Ç–æ—Ä–æ–π —Ä–∞–∑ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç
    
    # ===== –ü–†–ò–ú–ï–† 5: –ü–†–û–í–ï–†–ö–ê –£–ñ–ï –û–ë–†–ê–ë–û–¢–ê–ù–ù–´–• –ü–£–¢–ï–ô =====
    print_color("\nüìÅ –ü–†–ò–ú–ï–† 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø—É—Ç–µ–π", Colors.BLUE)
    
    test_paths = [
        "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/—Ñ–∞–π–ª.md",
        "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/–ü–∞–ø–∫–∞ - fb2/—Ñ–∞–π–ª.md",
        "/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_fb2_–º–¥—Ñ–±2/–ü–∞–ø–∫–∞ - docx/—Ñ–∞–π–ª.md",
    ]
    
    for path in test_paths:
        if ops.is_processed_path(path):
            print_color(f"   ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º (—É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω): {Path(path).name}", Colors.YELLOW)
        else:
            print_color(f"   ‚úÖ –ú–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å: {Path(path).name}", Colors.GREEN)
    
    # ===== –ü–†–ò–ú–ï–† 6: –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ô - MIRRORING –° –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–¨–Æ =====
    print_color("\nüìÅ –ü–†–ò–ú–ï–† 6: Mirroring —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é", Colors.BLUE)
    
    class IdempotentMirror:
        def __init__(self, work_dir, input_ext, output_ext):
            self.work_dir = Path(work_dir)
            self.input_ext = input_ext
            self.output_ext = output_ext
            self.suffix = f" - {output_ext}"
            self.ops = IdempotentOperations(work_dir / ".state")
        
        def mirror_file(self, file_path):
            """–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é"""
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ
            if self.ops.is_processed_path(file_path, [self.suffix]):
                print(f"   ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º: {file_path.name} (—É–∂–µ –≤ –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ)")
                return True
            
            file_path = Path(file_path)
            file_dir = file_path.parent
            filename = file_path.stem
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–µ–ª–µ–≤–æ–π –ø—É—Ç—å
            if file_dir == self.work_dir:
                target_dir = self.work_dir
                print(f"   üìç –ö–æ—Ä–Ω–µ–≤–æ–π —Ñ–∞–π–ª")
            else:
                rel_path = str(file_dir.relative_to(self.work_dir))
                parts = rel_path.split(os.sep)
                top_folder = parts[0]
                sub_path = os.sep.join(parts[1:]) if len(parts) > 1 else ""
                
                target_dir = self.work_dir / f"{top_folder}{self.suffix}" / sub_path
                print(f"   üîÑ –ó–µ—Ä–∫–∞–ª–æ: {top_folder}{self.suffix}/{sub_path}")
            
            # –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ)
            target_dir.mkdir(parents=True, exist_ok=True)
            
            # –¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª
            target_file = target_dir / f"{filename}.{self.output_ext}"
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            if target_file.exists():
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–æ–≤–µ–µ –ª–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫
                if file_path.stat().st_mtime <= target_file.stat().st_mtime:
                    print(f"   ‚è≠Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–≤–µ–∂–µ–µ")
                    return True
            
            # –ò–º–∏—Ç–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª)
            target_file.write_text(f"# –°–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ {file_path.name}")
            print(f"   ‚úÖ –°–æ–∑–¥–∞–Ω: {target_file.name}")
            
            return True
        
        def mirror_all(self):
            """–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤"""
            files = list(self.work_dir.rglob(f"*.{self.input_ext}"))
            print(f"\nüîç –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(files)}")
            
            for i, file in enumerate(files, 1):
                print(f"\n[{i}] {file.name}")
                self.mirror_file(file)
    
    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    test_mirror_dir = Path(demo_dir) / "mirror_test"
    test_mirror_dir.mkdir(exist_ok=True)
    
    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
    (test_mirror_dir / "–∫–æ—Ä–Ω–µ–≤–æ–π.md").write_text("# –ö–æ—Ä–Ω–µ–≤–æ–π —Ñ–∞–π–ª")
    (test_mirror_dir / "–ü–∞–ø–∫–∞–ê").mkdir(exist_ok=True)
    (test_mirror_dir / "–ü–∞–ø–∫–∞–ê" / "—Ñ–∞–π–ª1.md").write_text("# –§–∞–π–ª –≤ –ø–∞–ø–∫–µ")
    (test_mirror_dir / "–ü–∞–ø–∫–∞–ê" / "–ü–æ–¥–ø–∞–ø–∫–∞").mkdir(exist_ok=True)
    (test_mirror_dir / "–ü–∞–ø–∫–∞–ê" / "–ü–æ–¥–ø–∞–ø–∫–∞" / "—Ñ–∞–π–ª2.md").write_text("# –§–∞–π–ª –≤ –ø–æ–¥–ø–∞–ø–∫–µ")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
    mirror = IdempotentMirror(test_mirror_dir, "md", "fb2")
    mirror.mirror_all()
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ (–¥–æ–ª–∂–µ–Ω –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
    print_color("\nüîÑ –í–¢–û–†–û–ô –ó–ê–ü–£–°–ö (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º):", Colors.YELLOW)
    mirror.mirror_all()
    
    print_color("\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê", Colors.BLUE)
    print_color("‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞", Colors.GREEN)

if __name__ == "__main__":
    import time
    demo_idempotency()
```

---

## 4Ô∏è‚É£ REFERENCE-DOC WORKFLOW (–†–ê–ë–û–¢–ê –° –®–ê–ë–õ–û–ù–ê–ú–ò PANDOC)

### üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï
**Reference-doc workflow** ‚Äî –º–µ—Ç–æ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∑–∞ –æ—Å–Ω–æ–≤—É –¥–∏–∑–∞–π–Ω–∞ –±–µ—Ä—ë—Ç—Å—è "—Ñ–∞–π–ª-—ç—Ç–∞–ª–æ–Ω" (.docx). –í—Å–µ —Å—Ç–∏–ª–∏ (—à—Ä–∏—Ñ—Ç—ã, –æ—Ç—Å—Ç—É–ø—ã, —Ü–≤–µ—Ç–∞) –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –∏–∑ –Ω–µ–≥–æ –≤ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** Pandoc –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `--reference-doc=template.docx` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Ö –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É. –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Å—Ç–∏–ª—è–º–∏.

### üé® –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –†–ò–°–£–ù–û–ö
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    REFERENCE-DOC WORKFLOW                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–®–ê–ë–õ–û–ù (reference.docx)                 –†–ï–ó–£–õ–¨–¢–ê–¢ (output.docx)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ó–∞–≥–æ–ª–æ–≤–æ–∫ 1: Arial 16‚îÇ                ‚îÇ –ó–∞–≥–æ–ª–æ–≤–æ–∫ 1: Arial 16‚îÇ
‚îÇ   ‚óè —Å—Ç–∏–ª—å: Heading1  ‚îÇ    pandoc      ‚îÇ   ‚óè —Ç–æ—Ç –∂–µ —Å—Ç–∏–ª—å     ‚îÇ
‚îÇ                      ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí    ‚îÇ                      ‚îÇ
‚îÇ –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:       ‚îÇ                ‚îÇ –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:       ‚îÇ
‚îÇ   Charter 12pt       ‚îÇ                ‚îÇ   Charter 12pt       ‚îÇ
‚îÇ   ‚óè —Å—Ç–∏–ª—å: Normal    ‚îÇ                ‚îÇ   ‚óè —Å—Ç–∏–ª—å: Normal    ‚îÇ
‚îÇ                      ‚îÇ                ‚îÇ                      ‚îÇ
‚îÇ –¢–∞–±–ª–∏—Ü–∞: —Å–µ—Ç–∫–∞,      ‚îÇ                ‚îÇ –¢–∞–±–ª–∏—Ü–∞: —Å–µ—Ç–∫–∞,      ‚îÇ
‚îÇ   —à—Ä–∏—Ñ—Ç Mono         ‚îÇ                ‚îÇ   —à—Ä–∏—Ñ—Ç Mono         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–†–û–¶–ï–°–°:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –°–æ–∑–¥–∞—ë—Ç—Å—è —à–∞–±–ª–æ–Ω .docx —Å –Ω—É–∂–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏                ‚îÇ
‚îÇ 2. Pandoc —á–∏—Ç–∞–µ—Ç —Å—Ç–∏–ª–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞                          ‚îÇ
‚îÇ 3. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Ö –∫ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É Markdown               ‚îÇ
‚îÇ 4. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–∞               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üíª –°–ö–†–ò–ü–¢ –î–õ–Ø TERMUX

```bash
#!/data/data/com.termux/files/usr/bin/bash
# –§–∞–π–ª: reference_doc_demo.sh
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Reference-doc workflow

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø REFERENCE-DOC WORKFLOW${NC}"
echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}\n"

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
TEMPLATE_DIR="$HOME/.pandoc/templates"
TEMPLATE_FILE="$TEMPLATE_DIR/elegant.docx"
DEMO_DIR="/storage/emulated/0/Documents/reference_doc_demo"
MARKDOWN_FILE="$DEMO_DIR/sample.md"

# –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫–∏
mkdir -p "$TEMPLATE_DIR" "$DEMO_DIR"

# ===== –®–ê–ì 1: –°–û–ó–î–ê–ù–ò–ï REFERENCE-DOC =====
echo -e "${YELLOW}–®–ê–ì 1: –°–æ–∑–¥–∞–Ω–∏–µ reference-doc —à–∞–±–ª–æ–Ω–∞${NC}\n"

# –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π Markdown —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å—Ç–∏–ª–µ–π
cat > "$DEMO_DIR/style_definitions.md" << 'EOF'
---
title: "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –¥–ª—è —à–∞–±–ª–æ–Ω–∞"
author: "–†–∞—Ñ–∞—ç–ª—å"
date: "2026-02-23"
---

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ 1 (Heading 1)
–≠—Ç–æ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ —Å—Ç–∏–ª–µ Normal. –ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à—Ä–∏—Ñ—Ç Charter.

## –ó–∞–≥–æ–ª–æ–≤–æ–∫ 2 (Heading 2)
–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ç–∏–ª–µ–π.

### –ó–∞–≥–æ–ª–æ–≤–æ–∫ 3 (Heading 3)
–ï—â—ë —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏.

**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç** –∏ *–∫—É—Ä—Å–∏–≤* –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

# –¢–∞–±–ª–∏—Ü–∞ –≤ Markdown
| –ò–º—è    | –í–æ–∑—Ä–∞—Å—Ç | –ì–æ—Ä–æ–¥      |
|--------|---------|------------|
| –ê–Ω–Ω–∞   | 25      | –ú–æ—Å–∫–≤–∞     |
| –ò–≤–∞–Ω   | 30      | –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ |

# –°–ø–∏—Å–æ–∫
- –≠–ª–µ–º–µ–Ω—Ç 1
- –≠–ª–µ–º–µ–Ω—Ç 2
  - –ü–æ–¥—ç–ª–µ–º–µ–Ω—Ç 2.1
  - –ü–æ–¥—ç–ª–µ–º–µ–Ω—Ç 2.2

# –ö–æ–¥
```bash
echo "–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞"
```
EOF

echo -e "${BLUE}üîß –°–æ–∑–¥–∞—é –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω...${NC}"

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ docx (—ç—Ç–æ –±—É–¥–µ—Ç –Ω–∞—à reference-doc)
pandoc "$DEMO_DIR/style_definitions.md" -o "$TEMPLATE_FILE" \
    --from=markdown+pipe_tables+attributes \
    --metadata=title:"Reference Template"

if [ $? -eq 0 ]; then
    echo -e "${GREEN}‚úÖ –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω: $TEMPLATE_FILE${NC}"
else
    echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞${NC}"
    exit 1
fi

# ===== –®–ê–ì 2: –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ù–ê–°–¢–†–û–ô–ö–ï –®–ê–ë–õ–û–ù–ê =====
echo -e "\n${YELLOW}–®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–∞ –≤ Word${NC}"
echo -e "${BLUE}üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:${NC}"
echo "   1. –û—Ç–∫—Ä–æ–π $TEMPLATE_FILE –≤ Word –∏–ª–∏ LibreOffice"
echo "   2. –ù–∞—Å—Ç—Ä–æ–π —Å—Ç–∏–ª–∏:"
echo "      - Heading 1: Montserrat, 16pt, –ø–æ–ª—É–∂–∏—Ä–Ω—ã–π"
echo "      - Heading 2: Montserrat, 14pt, –ø–æ–ª—É–∂–∏—Ä–Ω—ã–π"
echo "      - Normal: Charter, 12pt"
echo "      - Source Code: JetBrains Mono, 10pt"
echo "   3. –í—Å—Ç—Ä–æ–π —à—Ä–∏—Ñ—Ç—ã: –§–∞–π–ª ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí –í—Å—Ç—Ä–æ–∏—Ç—å —à—Ä–∏—Ñ—Ç—ã"
echo "   4. –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª (–æ–Ω –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —à–∞–±–ª–æ–Ω)"

# ===== –®–ê–ì 3: –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–û–ù–ù–´–ô MARKDOWN =====
echo -e "\n${YELLOW}–®–ê–ì 3: –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ Markdown${NC}"

cat > "$MARKDOWN_FILE" << 'EOF'
---
title: "–ú–æ—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∫–Ω–∏–≥–∞"
author: "–†–∞—Ñ–∞—ç–ª—å"
date: "2026-02-23"
---

# –í–≤–µ–¥–µ–Ω–∏–µ
–≠—Ç–æ –ø–µ—Ä–≤–∞—è –≥–ª–∞–≤–∞ –º–æ–µ–π –∫–Ω–∏–≥–∏. –ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à—Ä–∏—Ñ—Ç Charter 
–¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ —à–∞–±–ª–æ–Ω–µ.

## –ü–æ–¥—Ä–∞–∑–¥–µ–ª 1.1
–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞. **–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç** –≤—ã–¥–µ–ª–µ–Ω –∂–∏—Ä–Ω—ã–º.

### –ï—â—ë –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å
–ó–¥–µ—Å—å –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Ä–∞–±–æ—Ç–∞—é—Ç –ª–∏ –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.

# –¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö
| –ü—Ä–æ–¥—É–∫—Ç | –¶–µ–Ω–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|---------|------|------------|
| –Ø–±–ª–æ–∫–∏  | 100  | 5          |
| –ì—Ä—É—à–∏   | 150  | 3          |

# –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- [x] –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —à—Ä–∏—Ñ—Ç—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é

# –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞
```python
def hello():
    print("–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!")
```
EOF

echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω: $MARKDOWN_FILE${NC}"

# ===== –®–ê–ì 4: –ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø –° REFERENCE-DOC =====
echo -e "\n${YELLOW}–®–ê–ì 4: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å reference-doc${NC}"

OUTPUT_FILE="$DEMO_DIR/output.docx"

echo -e "${BLUE}üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–∞...${NC}"
pandoc "$MARKDOWN_FILE" -o "$OUTPUT_FILE" \
    --from=markdown+pipe_tables+attributes \
    --reference-doc="$TEMPLATE_FILE" \
    --metadata=title:"–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–∏–≥–∞" \
    --toc

if [ $? -eq 0 ]; then
    echo -e "${GREEN}‚úÖ –ì–æ—Ç–æ–≤–æ: $OUTPUT_FILE${NC}"
else
    echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏${NC}"
fi

# ===== –®–ê–ì 5: –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–û–í–°–ï–î–ù–ï–í–ù–û–ì–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø =====
echo -e "\n${YELLOW}–®–ê–ì 5: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è${NC}"

cat > "$DEMO_DIR/convert_with_template.sh" << 'EOF'
#!/data/data/com.termux/files/usr/bin/bash
# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å —à–∞–±–ª–æ–Ω–æ–º

convert_with_style() {
    local input_file="$1"
    local output_file="${input_file%.md}.docx"
    local template="$HOME/.pandoc/templates/elegant.docx"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    if [ ! -f "$input_file" ]; then
        echo "‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: $input_file"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–∞
    if [ ! -f "$template" ]; then
        echo "‚ö†Ô∏è –®–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –±–µ–∑ —Å—Ç–∏–ª–µ–π"
        template=""
    fi
    
    # –°–±–æ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã
    CMD="pandoc \"$input_file\" -o \"$output_file\" \
        --from=markdown+pipe_tables+attributes \
        --toc"
    
    if [ -n "$template" ]; then
        CMD="$CMD --reference-doc=\"$template\""
    fi
    
    echo "üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é: $(basename "$input_file")"
    eval $CMD
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ –ì–æ—Ç–æ–≤–æ: $(basename "$output_file")"
        
        # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ
        size=$(du -h "$output_file" | cut -f1)
        echo "üìä –†–∞–∑–º–µ—Ä: $size"
    else
        echo "‚ùå –û—à–∏–±–∫–∞"
        return 1
    fi
}

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if [ $# -eq 0 ]; then
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 —Ñ–∞–π–ª.md"
    exit 1
fi

convert_with_style "$1"
EOF

chmod +x "$DEMO_DIR/convert_with_template.sh"
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç: $DEMO_DIR/convert_with_template.sh${NC}"

# ===== –®–ê–ì 6: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –ó–ï–†–ö–ê–õ–¨–ù–û–ô –õ–û–ì–ò–ö–û–ô =====
echo -e "\n${YELLOW}–®–ê–ì 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∑–µ—Ä–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π${NC}"

cat > "$DEMO_DIR/mirror_with_template.sh" << 'EOF'
#!/data/data/com.termux/files/usr/bin/bash
# –ó–µ—Ä–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–∞

WORK_DIR="/storage/emulated/0/Documents/05_–≠–ª–µ–∫—Ç_–∫–Ω–∏–≥–∏/02_md_docx_–º–¥–¥–æ–∫"
TEMPLATE="$HOME/.pandoc/templates/elegant.docx"

convert_file() {
    local md_file="$1"
    local docx_file="$2"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
    if [ -f "$docx_file" ] && [ "$md_file" -ot "$docx_file" ]; then
        echo "‚è≠Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞—é (—Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–µ–∂–µ–µ): $(basename "$md_file")"
        return 0
    fi
    
    # –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É
    mkdir -p "$(dirname "$docx_file")"
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
    echo "üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é: $(basename "$md_file")"
    pandoc "$md_file" -o "$docx_file" \
        --from=markdown+pipe_tables+attributes \
        --reference-doc="$TEMPLATE" \
        --toc
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ –ì–æ—Ç–æ–≤–æ: $(basename "$docx_file")"
    else
        echo "‚ùå –û—à–∏–±–∫–∞: $(basename "$md_file")"
    fi
}

# –ü–æ–∏—Å–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
find "$WORK_DIR" -name "*.md" | while read -r file; do
    filename=$(basename "$file" .md)
    filedir=$(dirname "$file")
    
    if [ "$filedir" = "$WORK_DIR" ]; then
        # –ö–æ—Ä–Ω–µ–≤–æ–π —Ñ–∞–π–ª
        output="$WORK_DIR/$filename.docx"
        convert_file "$file" "$output"
    else
        # –§–∞–π–ª –≤ –ø–∞–ø–∫–µ
        rel_path="${filedir#$WORK_DIR/}"
        top_folder="${rel_path%%/*}"
        sub_path="${rel_path#$top_folder}"
        output="$WORK_DIR/${top_folder} - docx${sub_path}/$filename.docx"
        convert_file "$file" "$output"
    fi
done
EOF

chmod +x "$DEMO_DIR/mirror_with_template.sh"
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç: $DEMO_DIR/mirror_with_template.sh${NC}"

# ===== –®–ê–ì 7: –ü–†–û–í–ï–†–ö–ê –®–†–ò–§–¢–û–í =====
echo -e "\n${YELLOW}–®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤${NC}"

cat > "$DEMO_DIR/check_fonts.sh" << 'EOF'
#!/data/data/com.termux/files/usr/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤ –≤ docx

check_fonts() {
    local docx_file="$1"
    
    if [ ! -f "$docx_file" ]; then
        echo "‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    echo "üîç –ê–Ω–∞–ª–∏–∑: $(basename "$docx_file")"
    
    # –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    TMP_DIR="/data/data/com.termux/files/home/tmp/font_check"
    mkdir -p "$TMP_DIR"
    
    # –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º docx (—ç—Ç–æ zip-–∞—Ä—Ö–∏–≤)
    unzip -q "$docx_file" -d "$TMP_DIR" 2>/dev/null
    
    # –ò—â–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —à—Ä–∏—Ñ—Ç–∞—Ö
    echo -e "\nüìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à—Ä–∏—Ñ—Ç–∞—Ö:"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º document.xml –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤
    if [ -f "$TMP_DIR/word/document.xml" ]; then
        echo "   –®—Ä–∏—Ñ—Ç—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ:"
        grep -o 'w:ascii="[^"]*"' "$TMP_DIR/word/document.xml" | sort -u | sed 's/w:ascii=/   ‚Ä¢ /g'
        grep -o 'w:hAnsi="[^"]*"' "$TMP_DIR/word/document.xml" | sort -u | sed 's/w:hAnsi=/   ‚Ä¢ /g'
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã
    if [ -d "$TMP_DIR/word/fonts" ]; then
        echo -e "\n‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –Ω–∞–π–¥–µ–Ω—ã:"
        ls -1 "$TMP_DIR/word/fonts" | sed 's/^/   ‚Ä¢ /'
    else
        echo -e "\n‚ùå –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
    fi
    
    # –û—á–∏—Å—Ç–∫–∞
    rm -rf "$TMP_DIR"
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if [ $# -eq 0 ]; then
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 —Ñ–∞–π–ª.docx"
    exit 1
fi

check_fonts "$1"
EOF

chmod +x "$DEMO_DIR/check_fonts.sh"
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤${NC}"

# ===== –®–ê–ì 8: –°–û–ó–î–ê–ù–ò–ï –®–ê–ë–õ–û–ù–ê PYTHON =====
echo -e "\n${YELLOW}–®–ê–ì 8: Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞${NC}"

cat > "$DEMO_DIR/update_template.py" << 'EOF'
#!/usr/bin/env python3
# –§–∞–π–ª: update_template.py
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è reference-doc —à–∞–±–ª–æ–Ω–∞

import os
import zipfile
import tempfile
import shutil
from pathlib import Path
import xml.etree.ElementTree as ET

class TemplateUpdater:
    """–ö–ª–∞—Å—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è reference-doc —à–∞–±–ª–æ–Ω–∞"""
    
    def __init__(self, template_path):
        self.template_path = Path(template_path)
        self.temp_dir = Path(tempfile.mkdtemp())
        
    def extract_template(self):
        """–†–∞—Å–ø–∞–∫–æ–≤–∫–∞ docx —à–∞–±–ª–æ–Ω–∞"""
        print(f"üì¶ –†–∞—Å–ø–∞–∫–æ–≤–∫–∞: {self.template_path.name}")
        with zipfile.ZipFile(self.template_path, 'r') as zip_ref:
            zip_ref.extractall(self.temp_dir)
    
    def update_styles(self):
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –≤ document.xml"""
        document_xml = self.temp_dir / 'word' / 'document.xml'
        styles_xml = self.temp_dir / 'word' / 'styles.xml'
        
        if not document_xml.exists():
            print("‚ùå document.xml –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return
        
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω
        namespaces = {
            'w': 'http://schemas.openxmlformats.org/wordprocessingml/2006/main'
        }
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –≤ document.xml
        tree = ET.parse(document_xml)
        root = tree.getroot()
        
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
        # –ù–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        
        tree.write(document_xml, encoding='UTF-8', xml_declaration=True)
        print("‚úÖ –°—Ç–∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã")
    
    def embed_fonts(self, font_dir):
        """–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ –≤ —à–∞–±–ª–æ–Ω"""
        font_target = self.temp_dir / 'word' / 'fonts'
        font_target.mkdir(exist_ok=True)
        
        if not font_dir.exists():
            print(f"‚ùå –ü–∞–ø–∫–∞ —Å–æ —à—Ä–∏—Ñ—Ç–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {font_dir}")
            return
        
        fonts_copied = 0
        for font_file in font_dir.glob("*.ttf"):
            shutil.copy2(font_file, font_target / font_file.name)
            fonts_copied += 1
            print(f"   ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω: {font_file.name}")
        
        # –û–±–Ω–æ–≤–ª—è–µ–º _rels/.rels –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —à—Ä–∏—Ñ—Ç–æ–≤
        rels_file = self.temp_dir / 'word' / '_rels' / 'document.xml.rels'
        if rels_file.exists():
            tree = ET.parse(rels_file)
            root = tree.getroot()
            
            # –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è –¥–ª—è —à—Ä–∏—Ñ—Ç–æ–≤
            ns = {'rel': 'http://schemas.openxmlformats.org/package/2006/relationships'}
            
            for i, font_file in enumerate(font_target.glob("*.ttf")):
                rel_elem = ET.Element(f"{{{ns['rel']}}}Relationship")
                rel_elem.set("Id", f"fontId{i}")
                rel_elem.set("Type", "http://schemas.openxmlformats.org/officeDocument/2006/relationships/font")
                rel_elem.set("Target", f"fonts/{font_file.name}")
                root.append(rel_elem)
            
            tree.write(rels_file, encoding='UTF-8', xml_declaration=True)
        
        print(f"\n‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–æ —à—Ä–∏—Ñ—Ç–æ–≤: {fonts_copied}")
    
    def pack_template(self, output_path):
        """–£–ø–∞–∫–æ–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ docx"""
        with zipfile.ZipFile(output_path, 'w', zipfile.ZIP_DEFLATED) as zip_ref:
            for file_path in self.temp_dir.rglob("*"):
                if file_path.is_file():
                    arcname = str(file_path.relative_to(self.temp_dir))
                    zip_ref.write(file_path, arcname)
        
        print(f"‚úÖ –®–∞–±–ª–æ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {output_path}")
    
    def cleanup(self):
        """–û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"""
        shutil.rmtree(self.temp_dir)
        print("üßπ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã")

def main():
    print("="*50)
    print("   –û–ë–ù–û–í–õ–ï–ù–ò–ï REFERENCE-DOC –®–ê–ë–õ–û–ù–ê")
    print("="*50)
    
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    template_path = Path(os.path.expanduser("~/.pandoc/templates/elegant.docx"))
    font_dir = Path("/storage/emulated/0/Documents/15_–ù–∞—Å—Ç—Ä–æ–π–∫–∏_—Å–∫—Ä–∏–ø—Ç—ã_Termux_–±–µ–∫–∞–ø_—Ä–µ—Å—Ç–æ—Ä/–®—Ä–∏—Ñ—Ç—ã")
    backup_path = template_path.with_suffix(".backup.docx")
    
    # –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫–∏
    template_path.parent.mkdir(parents=True, exist_ok=True)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
    if not template_path.exists():
        print(f"‚ö†Ô∏è –®–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω, –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π")
        # –°–æ–∑–¥–∞—ë–º –ø—É—Å—Ç–æ–π docx —á–µ—Ä–µ–∑ pandoc
        os.system(f'echo " " | pandoc -o "{template_path}"')
    
    # –°–æ–∑–¥–∞—ë–º –±—ç–∫–∞–ø
    if template_path.exists():
        shutil.copy2(template_path, backup_path)
        print(f"üì¶ –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: {backup_path.name}")
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
    updater = TemplateUpdater(template_path)
    
    try:
        # –†–∞—Å–ø–∞–∫–æ–≤–∫–∞
        updater.extract_template()
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
        updater.update_styles()
        
        # –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤
        if font_dir.exists():
            updater.embed_fonts(font_dir)
        else:
            print(f"‚ö†Ô∏è –ü–∞–ø–∫–∞ —Å–æ —à—Ä–∏—Ñ—Ç–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {font_dir}")
        
        # –£–ø–∞–∫–æ–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ
        updater.pack_template(template_path)
        
        print("\n‚ú® –®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω!")
        
    finally:
        # –û—á–∏—Å—Ç–∫–∞
        updater.cleanup()

if __name__ == "__main__":
    main()
EOF

chmod +x "$DEMO_DIR/update_template.py"
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞${NC}"

echo -e "\n${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Reference-doc workflow –∑–∞–≤–µ—Ä—à–µ–Ω–∞${NC}"
echo -e "${YELLOW}üìÅ –í—Å–µ —Ñ–∞–π–ª—ã –≤:${NC} $DEMO_DIR"
```

---

## 5Ô∏è‚É£ PANDOC EXTENSIONS (–†–ê–°–®–ò–†–ï–ù–ò–Ø PANDOC)

### üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï
**Pandoc Extensions** ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Markdown, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã, —Å–Ω–æ—Å–∫–∏, –∞—Ç—Ä–∏–±—É—Ç—ã, –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** –£–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `--from=markdown+extension1+extension2` –∏–ª–∏ `-f markdown+pipe_tables+attributes`.

### üé® –ì–†–ê–§–ò–ß–ï–°–ö–ò–ô –†–ò–°–£–ù–û–ö
```
–ë–ê–ó–û–í–´–ô MARKDOWN                    –†–ê–°–®–ò–†–ï–ù–ù–´–ô MARKDOWN
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –ó–∞–≥–æ–ª–æ–≤–æ–∫                        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ {#id .class}
                                   [–∞—Ç—Ä–∏–±—É—Ç—ã]

* —Å–ø–∏—Å–æ–∫                           * —Å–ø–∏—Å–æ–∫
                                   [—Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏]

                                   | –¢–∞–±–ª–∏—Ü–∞ | —Å |
                                   |---------|---|
                                   | pipe_tables  |

[—Å—Å—ã–ª–∫–∞](url)                      [—Å—Å—ã–ª–∫–∞](url){target="_blank"}

                                   ^[–°–Ω–æ—Å–∫–∞ —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º]

                                   $x^2 + y^2 = z^2$
                                   [TeX –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞]

–û–°–ù–û–í–ù–´–ï –†–ê–°–®–ò–†–ï–ù–ò–Ø:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ pipe_tables    ‚îÇ —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ |                                ‚îÇ
‚îÇ attributes     ‚îÇ {#id .class key=value}                         ‚îÇ
‚îÇ footnotes      ‚îÇ —Å–Ω–æ—Å–∫–∏ —á–µ—Ä–µ–∑ ^[...]                            ‚îÇ
‚îÇ citations      ‚îÇ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ [@citekey]                         ‚îÇ
‚îÇ tex_math_dollars‚îÇ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ $...$ –∏–ª–∏ $$...$$                  ‚îÇ
‚îÇ task_lists     ‚îÇ —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á - [x] –∏ - [ ]                     ‚îÇ
‚îÇ raw_html       ‚îÇ –≤—Å—Ç–∞–≤–∫–∞ HTML-–∫–æ–¥–∞                              ‚îÇ
‚îÇ yaml_metadata_block‚îÇ YAML –∑–∞–≥–æ–ª–æ–≤–æ–∫ --- ... ---                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üíª –°–ö–†–ò–ü–¢ –î–õ–Ø TERMUX

```bash
#!/data/data/com.termux/files/usr/bin/bash
# –§–∞–π–ª: pandoc_extensions_demo.sh
# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π Pandoc

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}   –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø PANDOC EXTENSIONS${NC}"
echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}\n"

DEMO_DIR="/storage/emulated/0/Documents/pandoc_extensions_demo"
mkdir -p "$DEMO_DIR"

# ===== –°–û–ó–î–ê–ù–ò–ï –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–û–ù–ù–û–ì–û –§–ê–ô–õ–ê =====
echo -e "${YELLOW}–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ Markdown —Å–æ –≤—Å–µ–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏${NC}\n"

cat > "$DEMO_DIR/all_extensions.md" << 'EOF'
---
title: "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π Pandoc"
author: "–†–∞—Ñ–∞—ç–ª—å"
date: "2026-02-23"
keywords: [pandoc, markdown, extensions]
abstract: |
  –≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Pandoc.
  –ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.
---

# 1. Pipe Tables {#pipe-tables .section}
–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —á–µ—Ä—Ç—ã.

| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|:-----------|:--------:|-------:|
| pipe_tables| –¢–∞–±–ª–∏—Ü—ã  | ‚úÖ     |
| attributes | –ê—Ç—Ä–∏–±—É—Ç—ã | ‚úÖ     |
| footnotes  | –°–Ω–æ—Å–∫–∏   | ‚úÖ     |

–¢–∞–±–ª–∏—Ü–∞ 1: –ü—Ä–∏–º–µ—Ä pipe_tables —Å –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ–º

# 2. Attributes {#attributes .section key=value}
–ê—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —Å—Å—ã–ª–æ–∫ –∏ –±–ª–æ–∫–æ–≤.

## –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ {#custom-id .class-name data-custom="value"}

–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç —Å [—Å—Å—ã–ª–∫–æ–π](https://example.com){target="_blank" rel="noopener"}.

![–ö–∞—Ä—Ç–∏–Ω–∫–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏](image.jpg){width=50% height=auto}

# 3. Footnotes (–°–Ω–æ—Å–∫–∏) {#footnotes}
–ó–¥–µ—Å—å –ø–æ–∫–∞–∑–∞–Ω—ã —Å–Ω–æ—Å–∫–∏^[–≠—Ç–æ –æ–±—ã—á–Ω–∞—è —Å–Ω–æ—Å–∫–∞ —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º] –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–Ω–æ—Å–∫–∏[^longnote].

[^longnote]: –≠—Ç–æ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–∞—è —Å–Ω–æ—Å–∫–∞.
    –û–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–±–∑–∞—Ü–µ–≤.
    
    –ò –¥–∞–∂–µ —Å–ø–∏—Å–∫–∏:
    - –≠–ª–µ–º–µ–Ω—Ç 1
    - –≠–ª–µ–º–µ–Ω—Ç 2

# 4. Citations (–¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) {#citations}
–ö–∞–∫ —Å–∫–∞–∑–∞–Ω–æ –≤ [@smith2000, p. 42], —ç—Ç–æ –≤–∞–∂–Ω–æ. 
–°—Ä–∞–≤–Ω–∏ —Å [@jones1999; @brown2001].

# –ë–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—è
::: {#refs}
:::

# 5. TeX Math (–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞) {#math}
–í–Ω—É—Ç—Ä–∏—Å—Ç—Ä–æ—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: $E = mc^2$.

–í—ã–∫–ª—é—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:
$$
\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}
$$

# 6. Task Lists (–°–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á) {#task-lists}
- [x] –°–¥–µ–ª–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- [x] –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
- [ ] –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

# 7. Definition Lists (–°–ø–∏—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π) {#definition-lists}

–¢–µ—Ä–º–∏–Ω 1
:   –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 1
:   –í—Ç–æ—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

–¢–µ—Ä–º–∏–Ω 2
:   –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏
    —Å—Ç—Ä–æ–∫–∞–º–∏ —Ç–µ–∫—Å—Ç–∞

# 8. Fenced Divs (–ë–ª–æ–∫–∏ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏) {#fenced-divs}

::: {.warning style="color: red;"}
–≠—Ç–æ –±–ª–æ–∫ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º.
–û–Ω –±—É–¥–µ—Ç —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω –æ—Å–æ–±—ã–º –æ–±—Ä–∞–∑–æ–º.
:::

::: {.note .important}
–í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏
–∞–±–∑–∞—Ü–∞–º–∏ —Ç–µ–∫—Å—Ç–∞.

–í—Ç–æ—Ä–æ–π –∞–±–∑–∞—Ü –≤ —Ç–æ–º –∂–µ –±–ª–æ–∫–µ.
:::

# 9. Raw HTML/TeX {#raw-html}
<div style="border:1px solid black; padding:10px;">
–≠—Ç–æ <span style="color:blue;">HTML</span> –≤–Ω—É—Ç—Ä–∏ Markdown.
</div>

\newcommand{\RR}{\mathbb{R}}
–í LaTeX –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã: $\RR$

# 10. Line Blocks (–ë–ª–æ–∫–∏ —Å—Ç—Ä–æ–∫) {#line-blocks}
| –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞
|   —Å–æ—Ö—Ä–∞–Ω–∏—Ç
|     –≤—Å–µ –ø—Ä–æ–±–µ–ª—ã
| –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã

# 11. Grid Tables (–°–ª–æ–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã) {#grid-tables}
+-----------+-----------+
| –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ó–∞–≥–æ–ª–æ–≤–æ–∫ |
+===========+===========+
| –Ø—á–µ–π–∫–∞    | –Ø—á–µ–π–∫–∞    |
+-----------+-----------+
| –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è —è—á–µ–π–∫–∞     |
+-----------+-----------+

# 12. Markdown –≤ HTML {#markdown-in-html}
<div markdown="1">
–≠—Ç–æ **Markdown** –≤–Ω—É—Ç—Ä–∏ HTML-–±–ª–æ–∫–∞.
- –°–ø–∏—Å–æ–∫
- –ü—É–Ω–∫—Ç—ã
</div>

# 13. YAML Metadata (–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) {#yaml}
–£–∂–µ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –ø–æ–∫–∞–∑–∞–Ω YAML-–±–ª–æ–∫ —Å:
- title
- author
- date
- keywords
- abstract

# 14. Smart Punctuation (–£–º–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞) {#smart}
–û–±—ã—á–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ "—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è" —Ç–∏–ø–æ–≥—Ä–∞—Ñ—Å–∫–∏–º–∏ "—ë–ª–æ—á–∫–∞–º–∏".
–¢—Ä–∏ —Ç–æ—á–∫–∏... —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ–º‚Ä¶
-- –∏ --- —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ç–∏—Ä–µ.
EOF

echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω –¥–µ–º–æ-—Ñ–∞–π–ª: $DEMO_DIR/all_extensions.md${NC}"

# ===== –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –†–ê–°–®–ò–†–ï–ù–ò–ô =====
test_extension() {
    local name="$1"
    local ext="$2"
    local output="$DEMO_DIR/test_${name}.md"
    
    echo -e "\n${BLUE}üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ${YELLOW}$name${NC} ($ext)"
    
    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    case $name in
        "pipe_tables")
            cat > "$output" << 'EOF'
| Header1 | Header2 |
|---------|---------|
| cell1   | cell2   |
EOF
            ;;
        "attributes")
            cat > "$output" << 'EOF'
# Title {#id .class}
[link](url){target="_blank"}
EOF
            ;;
        "footnotes")
            cat > "$output" << 'EOF'
Text^[footnote] and [^long].

[^long]: Long note.
EOF
            ;;
        "citations")
            cat > "$output" << 'EOF'
See [@doe99] and [@smith2000, p. 33].
EOF
            ;;
        "tex_math_dollars")
            cat > "$output" << 'EOF'
Inline $x^2$ and display $$y = mx + b$$.
EOF
            ;;
        "task_lists")
            cat > "$output" << 'EOF'
- [x] done
- [ ] todo
EOF
            ;;
    esac
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –∏ –±–µ–∑
    echo -n "   –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: "
    pandoc "$output" -t plain 2>/dev/null | head -1
    
    echo -n "   –° —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º:  "
    pandoc "$output" -t plain --from=markdown+"$ext" 2>/dev/null | head -1
}

# ===== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ö–ê–ñ–î–û–ì–û –†–ê–°–®–ò–†–ï–ù–ò–Ø =====
echo -e "\n${YELLOW}–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:${NC}"

test_extension "pipe_tables" "pipe_tables"
test_extension "attributes" "attributes"
test_extension "footnotes" "footnotes"
test_extension "tex_math_dollars" "tex_math_dollars"
test_extension "task_lists" "task_lists"

# ===== –ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø –í –†–ê–ó–ù–´–ï –§–û–†–ú–ê–¢–´ =====
echo -e "\n${YELLOW}–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:${NC}"

# HTML
echo -e "\n${BLUE}üìÑ HTML:${NC}"
pandoc "$DEMO_DIR/all_extensions.md" -o "$DEMO_DIR/output.html" \
    --from=markdown+pipe_tables+attributes+footnotes+citations+tex_math_dollars+task_lists+raw_html \
    --standalone --toc
echo -e "${GREEN}‚úÖ $DEMO_DIR/output.html${NC}"

# DOCX
echo -e "\n${BLUE}üìÑ DOCX:${NC}"
pandoc "$DEMO_DIR/all_extensions.md" -o "$DEMO_DIR/output.docx" \
    --from=markdown+pipe_tables+attributes+footnotes+citations+tex_math_dollars+task_lists \
    --toc
echo -e "${GREEN}‚úÖ $DEMO_DIR/output.docx${NC}"

# PDF (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–≤–∏–∂–æ–∫)
if command -v pdflatex &>/dev/null; then
    echo -e "\n${BLUE}üìÑ PDF:${NC}"
    pandoc "$DEMO_DIR/all_extensions.md" -o "$DEMO_DIR/output.pdf" \
        --from=markdown+pipe_tables+attributes+footnotes+citations+tex_math_dollars \
        --pdf-engine=pdflatex
    echo -e "${GREEN}‚úÖ $DEMO_DIR/output.pdf${NC}"
fi

# ===== –°–û–ó–î–ê–ù–ò–ï –§–£–ù–ö–¶–ò–ò-–ü–û–ú–û–©–ù–ò–ö–ê =====
echo -e "\n${YELLOW}–°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏-–ø–æ–º–æ—â–Ω–∏–∫–∞:${NC}"

cat > "$DEMO_DIR/pandoc_helper.sh" << 'EOF'
#!/data/data/com.termux/files/usr/bin/bash
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏

pandoc_all() {
    local input="$1"
    local output="${2:-${input%.*}.docx}"
    
    # –ë–∞–∑–æ–≤—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    EXTENSIONS="pipe_tables+attributes+footnotes+citations+tex_math_dollars+task_lists+definition_lists+fenced_divs+raw_html+grid_tables+line_blocks+yaml_metadata_block+smart"
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞
    case "${output##*.}" in
        html)
            EXTENSIONS="${EXTENSIONS}+raw_html+markdown_in_html_blocks"
            ;;
        pdf)
            EXTENSIONS="${EXTENSIONS}+tex_math_dollars"
            ;;
    esac
    
    echo "üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: $(basename "$input") ‚Üí $(basename "$output")"
    echo "üì¶ –†–∞—Å—à–∏—Ä–µ–Ω–∏—è: ${EXTENSIONS}"
    
    pandoc "$input" -o "$output" \
        --from=markdown+"${EXTENSIONS}" \
        --to="${output##*.}" \
        --standalone \
        --toc \
        --highlight-style=tango \
        --wrap=preserve
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
        echo "üìä –†–∞–∑–º–µ—Ä: $(du -h "$output" | cut -f1)"
    else
        echo "‚ùå –û—à–∏–±–∫–∞!"
        return 1
    fi
}

# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
pandoc_list() {
    pandoc --list-extensions=markdown | sort | column
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
pandoc_check() {
    local ext="$1"
    if pandoc --list-extensions=markdown | grep -q "^$ext$"; then
        echo "‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ '$ext' –¥–æ—Å—Ç—É–ø–Ω–æ"
    else
        echo "‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ '$ext' –ù–ï –¥–æ—Å—Ç—É–ø–Ω–æ"
    fi
}

# –ú–µ–Ω—é –ø–æ–º–æ—â–∏
case "${1:-}" in
    list)
        pandoc_list
        ;;
    check)
        pandoc_check "$2"
        ;;
    *)
        if [ $# -gt 0 ]; then
            pandoc_all "$@"
        else
            echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:"
            echo "  $0 —Ñ–∞–π–ª.md [–≤—ã—Ö–æ–¥–Ω–æ–π.—Ñ–æ—Ä–º–∞—Ç]"
            echo "  $0 list              - —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π"
            echo "  $0 check –†–ê–°–®–ò–†–ï–ù–ò–ï  - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ"
        fi
        ;;
esac
EOF

chmod +x "$DEMO_DIR/pandoc_helper.sh"
echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω: $DEMO_DIR/pandoc_helper.sh${NC}"

# ===== –°–û–ó–î–ê–ù–ò–ï –®–ü–ê–†–ì–ê–õ–ö–ò =====
echo -e "\n${YELLOW}–°–æ–∑–¥–∞–Ω–∏–µ —à–ø–∞—Ä–≥–∞–ª–∫–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º:${NC}"

cat > "$DEMO_DIR/extensions_cheatsheet.md" << 'EOF'
# üìö –®–ü–ê–†–ì–ê–õ–ö–ê –ü–û –†–ê–°–®–ò–†–ï–ù–ò–Ø–ú PANDOC

## üéØ –ë–ê–ó–û–í–´–ô –ù–ê–ë–û–† (–¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
```bash
pandoc input.md -o output.docx \
    --from=markdown+pipe_tables+attributes+footnotes+yaml_metadata_block
```

## üìã –ü–û–õ–ù–´–ô –ù–ê–ë–û–† (–≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
```bash
pandoc input.md -o output.docx \
    --from=markdown+pipe_tables+attributes+footnotes+citations+tex_math_dollars+task_lists+definition_lists+fenced_divs+raw_html+grid_tables+line_blocks+yaml_metadata_block+smart
```

## üîß –†–ê–°–®–ò–†–ï–ù–ò–Ø –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú

### –¢–∞–±–ª–∏—Ü—ã
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `pipe_tables` | –ü—Ä–æ—Å—Ç—ã–µ —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ `|` | `| a | b |` |
| `grid_tables` | –°–ª–æ–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å —Ä–∞–º–∫–∞–º–∏ | `+---+---+` |
| `multiline_tables` | –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã | |

### –ê—Ç—Ä–∏–±—É—Ç—ã
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `attributes` | ID, –∫–ª–∞—Å—Å—ã, –∫–ª—é—á–∏ | `{#id .class key=val}` |
| `link_attributes` | –ê—Ç—Ä–∏–±—É—Ç—ã —Å—Å—ã–ª–æ–∫ | `[text](url){target="_blank"}` |
| `mmd_header_attributes` | –ê—Ç—Ä–∏–±—É—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ | `## Header {#id}` |

### –¢–µ–∫—Å—Ç –∏ —Ä–∞–∑–º–µ—Ç–∫–∞
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `footnotes` | –°–Ω–æ—Å–∫–∏ | `^[text]` –∏–ª–∏ `[^id]` |
| `citations` | –¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `[@citekey]` |
| `tex_math_dollars` | –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ | `$x^2$` –∏–ª–∏ `$$x^2$$` |
| `raw_html` | HTML-–∫–æ–¥ | `<div>...</div>` |
| `raw_tex` | LaTeX-–∫–æ–¥ | `\LaTeX{}` |
| `markdown_in_html_blocks` | Markdown –≤ HTML | `<div markdown=1>` |

### –°–ø–∏—Å–∫–∏
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `task_lists` | –°–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á | `- [x] done` |
| `definition_lists` | –°–ø–∏—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π | `Term\n: definition` |
| `compact_definition_lists` | –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å–ø–∏—Å–∫–∏ | |

### –ë–ª–æ–∫–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `fenced_divs` | –ë–ª–æ–∫–∏ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ | `::: {.class}` |
| `fenced_code_blocks` | –ë–ª–æ–∫–∏ –∫–æ–¥–∞ | ```python``` |
| `line_blocks` | –ë–ª–æ–∫–∏ —Å—Ç—Ä–æ–∫ | `| line` |
| `hard_line_breaks` | –ñ—ë—Å—Ç–∫–∏–µ –ø–µ—Ä–µ–Ω–æ—Å—ã | |
| `escaped_line_breaks` | –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã | `\` |

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `yaml_metadata_block` | YAML –∑–∞–≥–æ–ª–æ–≤–æ–∫ | `---\ntitle:...\n---` |
| `pandoc_title_block` | –ó–∞–≥–æ–ª–æ–≤–æ–∫ Pandoc | `% title` |
| `biblatex` | –ë–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—è BibLaTeX | |

### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `smart` | –£–º–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ | `"–∫–∞–≤—ã—á–∫–∏"` ‚Üí ¬´–∫–∞–≤—ã—á–∫–∏¬ª |
| `emoji` | –≠–º–æ–¥–∑–∏ | `:smile:` ‚Üí üòä |
| `autolink_bare_uris` | –ê–≤—Ç–æ—Å—Å—ã–ª–∫–∏ | `https://example.com` |

## üöÄ –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –î–ª—è –∫–Ω–∏–≥–∏ (DOCX)
```bash
pandoc book.md -o book.docx \
    --from=markdown+pipe_tables+attributes+footnotes+task_lists+yaml_metadata_block+smart \
    --reference-doc=template.docx \
    --toc
```

### –î–ª—è –≤–µ–±–∞ (HTML)
```bash
pandoc article.md -o article.html \
    --from=markdown+pipe_tables+attributes+footnotes+raw_html+markdown_in_html_blocks \
    --standalone \
    --mathjax
```

### –î–ª—è –Ω–∞—É—á–Ω–æ–π —Å—Ç–∞—Ç—å–∏ (PDF)
```bash
pandoc paper.md -o paper.pdf \
    --from=markdown+pipe_tables+attributes+footnotes+citations+tex_math_dollars \
    --citeproc \
    --bibliography=refs.bib
```

## üîç –ü–†–û–í–ï–†–ö–ê –î–û–°–¢–£–ü–ù–´–• –†–ê–°–®–ò–†–ï–ù–ò–ô
```bash
# –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
pandoc --list-extensions=markdown | sort

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ
pandoc --list-extensions=markdown | grep pipe_tables
```

## ‚ö° –ë–´–°–¢–†–´–ô –¢–ï–°–¢ –†–ê–°–®–ò–†–ï–ù–ò–Ø
```bash
echo "| a | b |" | pandoc -f markdown+pipe_tables -t plain
```
EOF

echo -e "${GREEN}‚úÖ –°–æ–∑–¥–∞–Ω–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞: $DEMO_DIR/extensions_cheatsheet.md${NC}"

# ===== –¢–ï–°–¢–û–í–´–ô –ó–ê–ü–£–°–ö =====
echo -e "\n${YELLOW}–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:${NC}"
"$DEMO_DIR/pandoc_helper.sh" "$DEMO_DIR/all_extensions.md" "$DEMO_DIR/test_output.docx"

echo -e "\n${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo -e "${GREEN}‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Pandoc Extensions –∑–∞–≤–µ—Ä—à–µ–Ω–∞${NC}"
echo -e "${YELLOW}üìÅ –í—Å–µ —Ñ–∞–π–ª—ã –≤:${NC} $DEMO_DIR"
```

---

## üìö –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –í–°–ï–• –¢–ï–†–ú–ò–ù–û–í

| –¢–µ—Ä–º–∏–Ω | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ |
|--------|-------------|-------------------|
| **Parameter Substitution** | –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ Bash | `${var#pattern}`, `${var%pattern}` |
| **Directory Tree Mirroring** | –ó–µ—Ä–∫–∞–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã | `target="${WORK_DIR}/${top} - ${fmt}${sub}"` |
| **Idempotency** | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤ | `[ -f "$file" ] && ...` |
| **Reference-doc Workflow** | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω | `--reference-doc=template.docx` |
| **Pandoc Extensions** | –†–∞—Å—à–∏—Ä–µ–Ω–∏—è Markdown | `--from=markdown+pipe_tables` |

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å **–ü–û–õ–ù–´–ô –£–ß–ï–ë–ù–´–ô –°–ü–†–ê–í–û–ß–ù–ò–ö** –ø–æ –≤—Å–µ–º –∫–ª—é—á–µ–≤—ã–º —Ç–µ—Ä–º–∏–Ω–∞–º:

1. üìñ **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** - —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ
2. üé® **–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–∏—Å—É–Ω–æ–∫** - –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç
3. üíª **–°–∫—Ä–∏–ø—Ç –¥–ª—è Termux** - –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ Bash
4. üêç **–°–∫—Ä–∏–ø—Ç –¥–ª—è Pydroid 3** - –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ Python

–í—Å–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–∞–ø–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ Termux –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
cat > "/storage/emulated/0/Documents/15_–ù–∞—Å—Ç—Ä–æ–π–∫–∏_—Å–∫—Ä–∏–ø—Ç—ã_Termux_–±–µ–∫–∞–ø_—Ä–µ—Å—Ç–æ—Ä/08_–ü–æ–ª–Ω—ã–π_—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫_—Ç–µ—Ä–º–∏–Ω–æ–≤.md" << 'EOF'
[–≤—Å—Ç–∞–≤–∏—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç –≤—ã—à–µ]
EOF
```





.
























